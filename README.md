<p align="center">
<a href="https://vk.com/kolyaliam">VK</a>
<a href="https://github.com/NikolasDeForce">My Repositories</a>
<a href="https://barnaul.hh.ru/resume/16e7dbf2ff0ebd16820039ed1f313543694732">HH</a>

## О проекте

Web-приложение для расчета скоринга клиентов, написанное на фреймворке Symfony. Скоринг - это число равное сумме баллов по определенным правилам расчета.

[Тестовое задание](https://disk.yandex.ru/i/UR7s3hIlXexN0g) от компании [Sveak](https://sveak.com/).

## Как запустить

Для начала `git clone https://github.com/NikolasDeForce/users_scoring_symfony`. Далее, убедитесь что у вас стоят все нужные утилиты и зависимости. А именно: Composer&Symfony и MySQL `composer update`, `composer dump -o`.

Измените параменты подключения к БД в файле .env, создайте БД, таблицу и сделайте миграции. Для запуска миграций `bin/console doctrine:migrations:migrate`.

Подготовлена фикстура с сгенерированными данными клиентов для БД. Для запуска миграций фикстуры `bin/console doctrine:fixtures:load`

`php artisan serve` для запуска сервера.

## Консольное приложение

Реализованы консольные команды:
-По расчета общей суммы баллов всех клиентов.
-По расчету баллов по ID клиента.

Команда `score:all` рассчитывает общую сумму баллов и выводит значения в консоль со всеми данными расчетов.

Команда `score:id (id)`, с обязательным параметром ID клиента, рассчитывает баллы по одному клиенту и выводит в консоль данные.

Пример команды score:all
![Alt text](img/scoreall.png?raw=true "scoreall")
![Alt text](img/scoreallfinish.png?raw=true "scoreallfinish")

Пример команды score:id 1
![Alt text](img/scoreid.png?raw=true "scoreid")

## Тестирование

В папке tests реализованы юнит тесты по функции расчета скоринга. Запуск тестов `bin/phpunit`
Если вылезла ошибка о ненайденом классе, нужно написать в консоле `composer dump -o` или `composer dump-autoload -o` для записи переменных в окружение.

## Внешний вид приложения

Главная страница /users
![Alt text](img/users.png?raw=true "users")
На главной странице реализован список всех клиентов с короткой информацией и количеством баллов скоринга. У каждого есть кнопки "Информация" и "Удалить". При взаимодействие с кнопками идет переадресация на ID клиента. Кнопка внизу "Добавить клиента" переадрисовывает на контроллер создания клиента /users/new.
Сделана пагинация

Добавление нового клиента /users/new
![Alt text](img/new.png?raw=true "new")
На странице добавления ного клиента мы вводим данные и отправляем форму. Здесь реализуется функция рассчета скоринга и записывается в БД. При отправке происходит переадрисация на главную страницу.

Просмотр полной информации /users/{id}
![Alt text](img/data.png?raw=true "data")
При нажатии на кнопку "Информация" на главной страницу происходит переадрисация на просмотр карточки клиента с полной информацией. При нажатии на кнопку "Удалить" происходит удаление клиента из БД по ID.

Изменение данных /users/{id}/edit
![Alt text](img/edit.png?raw=true "edit")
При нажатии на кнопку "Изменить" на странице просмотра карточки клиента происходит переадрисация на контроллер изменения данных о клиенте. При отправке формы происходит подсчет баллов по обновленной информации и обновляются данные в БД.
